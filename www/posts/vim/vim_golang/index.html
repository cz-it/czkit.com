<!DOCTYPE html>
<html lang="zh-cn" class="wf-firasans-n4-active wf-active">
	<head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Enable responsiveness on mobile devices --> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    
    	
    <meta name="generator" content="Hugo 0.37.1" />
    
    <title>Golang With Vim &middot; CZKit</title>
    <meta content="Golang With Vim - CZKit" property="og:title">
    <meta content=" - 发现Vim的Golang环境配置已经被大神们整的这么Easy，如今Vundle可以让小白用户快速的配置好各种插件。所以只要会Vim基本使用" property="og:description">    
    <!-- CSS --> 
    <link rel="stylesheet" href="http://www.czkit.com/css/print.css" media="print">
    <link rel="stylesheet" href="http://www.czkit.com/css/poole.css">
    <link rel="stylesheet" href="http://www.czkit.com/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Sans:300,300i,400,400i,500">
    
    <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
    
    <!-- Customised CSS -->
    <link rel="stylesheet" href="http://www.czkit.com/css/custom.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    

	</head>
    <body>
        <div class="sidebar">
	<div class="container text-center sidebar-sticky">
		<div class="sidebar-about text-center">			
			 <img src="/images/logo.png" alt="Author Image" class="img-circle headshot center"> 
			<a href="http://www.czkit.com/"><h1 class="brand">CZKit</h1></a>
			<p class="lead">
				 Game &amp; Golang 
			</p>
		</div>
		
<div>
	<ul class="sidebar-nav">
		
		
				<li>
					<a href="/posts/"> <span>Posts</span></a>
				</li>
				<li>
					<a href="/categories/"> <span>Category</span></a>
				</li>
				<li>
					<a href="/tags/"> <span>Tags</span></a>
				</li>
				<li>
					<a href="/about.html"> <span>About</span></a>
				</li>
		</li>
	</ul>
</div>

        <p>
		<section class="row text-center">
	
	
	
	&nbsp;<a href="https://github.com/cz-it"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
	&nbsp;<a href="mailto:czkit.theng@gmail.com"><i class="fas fa-at fa-lg" aria-hidden="true"></i></a>
	
</section>

        </p>
		<p class="copyright">&copy; 2018 CZ
        <a href="https://creativecommons.org/licenses/by/4.0"> &copy CZKit.com </a>.<br/>Built with <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/htr3n/hyde-hyde">hyde-hyde</a>.
        </p>
	</div>
	<div>
	</div>
</div>

        <div class="content container">
            <div class="post">
  <h1>Golang With Vim</h1>
  
  <div class="col-sm-12 col-md-12">
    <span class="text-left post-date meta">
            
       <i class="fa fa-calendar" aria-hidden="true"></i> 27046-04-27 
      
      
        
        
            in
            
            
                <a class="meta" href="/categories/vim">VIM</a>
                
            
        
      
      
      
        
        
            <br/>
             <i class="fa fa-tags" aria-hidden="true"></i>
            
            <a class="meta" href="/tags/vim">vim</a>
        
      
      
      </span>  
  </div>    
  
  <p>在很久以前的官网<a href="https://golang.org/">golang.org</a>上是有一段视频的。视频里面正是用了Vim作为编辑器。
从Golang出生时，就有人为Vim好Emacs写了扩展插件。当然现在的Sublime/VSCode/Atom都可以很方便的配置成
一款顺手的Golang开发工具。</p>

<p>因为经历的原因，我是从Vim到Emacs现在又回到Vim。发现Vim的Golang环境配置已经被大神们整的这么Easy，最开始用
Vim那会，是要自己去<a href="http://vim.org">vim.org</a>上面找插件，然后自己放到.vim目录下，在写vimrc，稍稍不注意
就会弄的vim起来一堆错误。而今，有了<a href="https://github.com/VundleVim/Vundle.vim">Vundle</a> 和<a href="https://github.com/tpope/vim-pathogen">Pathogen</a>这样的插件管理神器，可以让小白用户快速的配置好各种插件。所以只要会Vim基本使用
，就可以很快的使用Vim来写Golang。</p>

<p>自从2006年发布了Vim7以来，直到2016年，时隔10年，Vim终于发布了Vim8，新的Vim汲取了NeoVim一些新的特性，总的
来说建议过度到Vim8上，另外目前MacOS默认的Vim7.3，所以需要自己装一下，可以使用二进制编译安装或者直接使用<a href="https://github.com/macvim-dev/macvim">MacVim</a></p>

<p>下面假定是重新安装的Vim，没有经过其他配置。Vim的用户配置文件在<code>~/.vimrc</code> ,一些插件和其他附加文件在<code>~/.vim</code>
目录。这里假定这个目录和文件都是不存在的。</p>

<p></p>

<h2 id="1-安装vundle">1. 安装Vundle</h2>

<p>这里选择了Vundle这个Vim插件神器，下面先安装下。</p>

<p>首先下载Vundle到.vim目录</p>

<pre><code>git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim
</code></pre>

<p>git会自动创建相关目录。这样我们就有了我们的Vim的配置文件目录<code>~/.vim</code>目录。</p>

<p>然后我们再创建配置文件<code>~/.vimrc</code> 直接用Vim创建</p>

<pre><code>vim ~/.vimrc
</code></pre>

<p>然后写入：</p>

<pre><code>    set nocompatible              &quot; be iMproved, required
    filetype off                  &quot; required

    &quot; set the runtime path to include Vundle and initialize
    set rtp+=~/.vim/bundle/Vundle.vim
    call vundle#begin()
    &quot; alternatively, pass a path where Vundle should install plugins
    &quot;call vundle#begin('~/some/path/here')

    &quot; let Vundle manage Vundle, required
    Plugin 'VundleVim/Vundle.vim'


    &quot; All of your Plugins must be added before the following line
    call vundle#end()            &quot; required
    filetype plugin indent on    &quot; required
</code></pre>

<p>所有的插件需要卸载<code>call vundle#end()</code>的前面。</p>

<p>然后执行:</p>

<pre><code>:PluginInstall
</code></pre>

<p>就可以安装相关的插件了。这里先安装好&rdquo;Vundle&rdquo;。</p>

<pre><code>&quot; Installing plugins to /Users/apollo/.vim/bundle   
. Plugin 'VundleVim/Vundle.vim'
...
Done!
</code></pre>

<p>提示表示安装完成。</p>

<h2 id="2-golang插件">2. Golang插件</h2>

<p>Golang在出生的时候就提供了Vim插件支持，并且越发展越完善，目前集成了godoc/golint/godef等等工具。同时还有个
为Golang提供自动补全功能的项目<a href="https://github.com/nsf/gocode">Gocode</a>。所以先配置这两个插件：</p>

<pre><code>      5 &quot;*********BEGIN OF VUNDLE ***********************************
      6 set nocompatible              &quot; be iMproved, required
      7 filetype off                  &quot; required
      8
      9 &quot; set the runtime path to include Vundle and initialize
     10 set rtp+=~/.vim/bundle/Vundle.vim
     11 call vundle#begin()
     12 &quot; alternatively, pass a path where Vundle should install plugins
     13 &quot;call vundle#begin('~/some/path/here')
     14
     15 &quot; let Vundle manage Vundle, required
     16 Plugin 'VundleVim/Vundle.vim'
     17
     18 &quot;Plugins
     19 Plugin 'nsf/gocode', {'rtp': 'vim/'} &quot; golang
     20 Plugin 'fatih/vim-go'                &quot; golang misc/vim
     32
     33 &quot; All of your Plugins must be added before the following line
     34 call vundle#end()            &quot; required
     35 filetype plugin indent on    &quot; required
     36 &quot;********************END OF VUNDLE **************************
</code></pre>

<p>然后执行:</p>

<pre><code>:PluginInstall
</code></pre>

<h2 id="3-tags插件">3. Tags插件</h2>

<p>IDE一般都提供了Tags界面，可以比较方便的找到函数或者类的定义。Vim可以借助ctags和gotags实现同样的功能。</p>

<p>首先安装ctags,在Mac上可以直接通过Brew 来安装：</p>

<pre><code>brew install ctags
</code></pre>

<blockquote>
<p>需要注意的是，如果你之前是个Emacs党，那么一般会安装好Emacs的ctags，而gotags不能识别，所以需要安装完ctags后
重新连接下。</p>
</blockquote>

<p>执行 ：</p>

<pre><code>ctags --version
Exuberant Ctags 5.8, Copyright (C) 1996-2009 Darren Hiebert
Compiled: May  3 2018, 20:26:45
Addresses: &lt;dhiebert@users.sourceforge.net&gt;, http://ctags.sourceforge.net
Optional compiled features: +wildcards, +regex
</code></pre>

<p>确定安装完成。</p>

<p>然后在安装<a href="https://github.com/jstemmer/gotags">GoTags</a>:</p>

<pre><code>go get -u github.com/jstemmer/gotags
</code></pre>

<p>最后配置&rdquo;.vimrc&rdquo;</p>

<pre><code>     82 &quot;**** go tags
     83 let g:tagbar_type_go = {
     84     \ 'ctagstype' : 'go',
     85     \ 'kinds'     : [
     86         \ 'p:package',
     87         \ 'i:imports:1',
     88         \ 'c:constants',
     89         \ 'v:variables',
     90         \ 't:types',
     91         \ 'n:interfaces',
     92         \ 'w:fields',
     93         \ 'e:embedded',
     94         \ 'm:methods',
     95         \ 'r:constructor',
     96         \ 'f:functions'
     97     \ ],
     98     \ 'sro' : '.',
     99     \ 'kind2scope' : {
    100         \ 't' : 'ctype',
    101         \ 'n' : 'ntype'
    102     \ },
    103     \ 'scope2kind' : {
    104         \ 'ctype' : 't',
    105         \ 'ntype' : 'n'
    106     \ },
    107     \ 'ctagsbin'  : 'gotags',
    108     \ 'ctagsargs' : '-sort -silent'
    109 \ }    
</code></pre>

<p>并在上面的插件中增加一个Tag现实的插件：</p>

<pre><code>Plugin 'majutsushi/tagbar'           &quot; tagbar should install ctags&amp;gotags
</code></pre>

<p>并重新安装，此时在打开go的文件后，执行<code>:TagbarToggle</code> 就可以看到如下的Tag界面了：</p>

<p><img src="../images/tags.png" alt="tags" /></p>

<h2 id="4-目录插件">4. 目录插件</h2>

<p>vim 说到目录插件，有一堆的选择，最牛逼的还是<a href="https://github.com/scrooloose/nerdtree">NERDTree</a>.
现在有了Vundle比以前方便多了，在也不用去Vim.org了。</p>

<p>直接在上面的插件位置增加：</p>

<pre><code>Plugin 'scrooloose/nerdtree'
</code></pre>

<p>然后执行安装，执行<code>:NERDTreeToggle</code>
就可以调出目录界面：</p>

<p><img src="../images/dir.png" alt="dir" /></p>

<h2 id="5-自动补齐">5. 自动补齐</h2>

<p>虽然上面的gocode已经基本能满足补齐需要，不过还有个牛X的补齐插件，可以扩展，当然其Golang部分也是用的Gocode。</p>

<p>神器名曰: YouCompleteMe</p>

<p>名字都霸气侧漏。和上面一样，在.vimrc中加上插件：</p>

<pre><code>Plugin 'Valloric/YouCompleteMe'      &quot; for auto complete
</code></pre>

<p>然后安装插件。</p>

<p>这个牛X插件是前Google大厂员工写的，其独特的地方是不是用vim脚本写的，而是用C++来实现的，所以其补齐效率非常高。</p>

<p>所以其安装方法也不一样。</p>

<p>在上面安装好了之后，还要去到</p>

<pre><code>cd ~/.vim/bundle/YouCompleteMe
</code></pre>

<p>执行：</p>

<pre><code>./install.py 
./install.py  --go-completer
</code></pre>

<p>执行编译安装。</p>

<p>具体效果可以参照<a href="https://github.com/Valloric/YouCompleteMe">YouCompleteMe</a>的动图。</p>

<h2 id="未完待续">未完待续</h2>

<p>我自己的.vimrc可以参考<a href="https://github.com/cz-it/.vim.d">Github</a></p>
</div>
            <div class="footer">
                



            </div>
        </div>
        
                
    </body>
</html>
